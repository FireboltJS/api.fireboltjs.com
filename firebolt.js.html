<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <title>Firebolt Source: firebolt.js</title> <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--> <link type="text/css" rel="stylesheet" href="styles/sunlight.default.css"> <link type="text/css" rel="stylesheet" href="styles/site.simplex.css"> </head> <body> <div class="container-fluid"> <div class="navbar navbar-fixed-top "> <div class="navbar-inner"> <a class="brand" href="index.html">Firebolt</a> <ul class="nav"> <li class="dropdown"> <a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b class="caret"></b></a> <ul class="dropdown-menu "> <li> <a href="Document.html">Document</a> </li> <li> <a href="Firebolt.html">Firebolt</a> </li> </ul> </li> <li class="dropdown"> <a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a> <ul class="dropdown-menu "> <li> <a href="Array.html">Array</a> </li> <li> <a href="Element.html">Element</a> </li> <li> <a href="Function.html">Function</a> </li> <li> <a href="HTMLCollection.html">HTMLCollection</a> </li> <li> <a href="HTMLElement.html">HTMLElement</a> </li> <li> <a href="Node.html">Node</a> </li> <li> <a href="NodeList.html">NodeList</a> </li> <li> <a href="Number.html">Number</a> </li> <li> <a href="String.html">String</a> </li> <li> <a href="Timer.html">Timer</a> </li> </ul> </li> <li class="dropdown"> <a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b class="caret"></b></a> <ul class="dropdown-menu "> <li> <a href="global.html#$1">$1</a> </li> <li> <a href="global.html#$_GET">$_GET</a> </li> <li> <a href="global.html#$class">$class</a> </li> <li> <a href="global.html#$doc">$doc</a> </li> <li> <a href="global.html#$id">$id</a> </li> <li> <a href="global.html#$name">$name</a> </li> <li> <a href="global.html#$tag">$tag</a> </li> <li> <a href="global.html#$wnd">$wnd</a> </li> </ul> </li> </ul> </div> </div> <div class="row-fluid"> <div class="span12"> <div id="main"> <h1 class="page-title">Source: firebolt.js</h1> <section> <article> <pre class="sunlight-highlight-javascript linenums">ï»¿/*
 * Firebolt current core file.
 * @author Nathan Woltman
 * @copyright 2014 Nathan Woltman, MIT https://github.com/FireboltJS/Firebolt/blob/master/LICENSE.txt
 */

(function(window, document) {

/*
 * Local variables that are compressed when this file is minified.
 */
var prototype = 'prototype',
	ArrayPrototype = Array[prototype],
	ElementPrototype = Element[prototype],
	HTMLElementPrototype = HTMLElement[prototype],
	NodePrototype = Node[prototype],
	NodeListPrototype = NodeList[prototype],
	StringPrototype = String[prototype],
	Object = window.Object,
	defineProperty = Object.defineProperty,
	defineProperties = Object.defineProperties,

	NodeListIdentifier = '_fbnlid_',

	/* Pre-built RegExps */
	rgxClassOrId = /^.[\w-_]+$/,
	rgxTag = /^[A-Za-z]+$/,
	rgxNonWhitespace = /\S+/g,
	rgxSpaceChars = /[ \n\r\t\f]+/; //From W3C http://www.w3.org/TR/html5/single-page.html#space-character


//#region =========================== Globals ================================

/*
 * Firebolt namespace reference objects.
 */
window.FB = window.Firebolt = Firebolt;
if (!window.$) {
	window.$ = Firebolt;
}

/**
 * The HTML document. Alias of `window.document`.
 * 
 * @global
 * @constant
 * @see Document
 * @example window.document === $doc  // true
 */
window.$doc = document;

/**
 * The JavaScript Window object. Alias of `window`.
 * 
 * @global
 * @constant
 * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Window|Window - Web API Interfaces | MDN}
 * @example window === $wnd  // true
 */
window.$wnd = window;

/**
 * PHP-style associative array (Object) of URL parameters.
 * 
 * @global
 * @constant
 * @name $_GET
 * @type {Object.&lt;String, String>}
 * @see {@link http://www.php.net/manual/en/reserved.variables.get.php|PHP: $_GET - Manual}
 */
function processQueryString(e, href) {
	var get = {},
		queryString = href ? href.match(/\?[^#]*/)[0] || '' : location.search,
		params = queryString.slice(1).split('&amp;'),
		i = 0;
	for (; i &lt; params.length; i++) {
		var keyval = params[i].split('=');
		if (keyval[0] != '') {
			get[decodeURIComponent(keyval[0])] = decodeURIComponent(keyval[1] || '');
		}
	}
	window.$_GET = Object.freeze(get);
}
processQueryString();
/*
 * Define an onpushstate event to update window.$_GET when the URL changes.
 * @see http://stackoverflow.com/questions/4570093/how-to-get-notified-about-changes-of-the-history-via-history-pushstate
 */
(function(history) {
	var pushState = history.pushState;
	history.pushState = function(state) {
		if (typeof history.onpushstate == "function") {
			history.onpushstate({ state: state });
		}
		processQueryString(0, arguments[2]);
		return pushState.apply(history, arguments);
	}
})(window.history);
/* Also update for window.onpopstate */
window.addEventListener('popstate', processQueryString);


/**
 * Returns the first element within the document that matches the specified CSS selector.&lt;br />
 * Alias of `document.querySelector()`.
 * 
 * @global
 * @param {String} selector
 * @returns {?Element}
 */
window.$1 = function(selector) {
	return document.querySelector(selector);
}

/**
 * Returns a list of the elements within the document with the specified class name.&lt;br />
 * Alias of `document.getElementsByClassName()`.
 * 
 * @global
 * @param {String} className
 * @returns {HTMLCollection|NodeList} A list of elements with the specified class name.
 */
window.$class = function(className) {
	return document.getElementsByClassName(className);
}

/**
 * Returns the first element within the document with the specified id.&lt;br />
 * Alias of `document.getElementById()`.
 * 
 * @global
 * @param {String} id
 * @returns {Element} The element with the specified id.
 */
window.$id = function(id) {
	return document.getElementById(id);
}

/**
 * Returns a list of the elements within the document with the specified name attribute.&lt;br />
 * Alias of `document.getElementsByName()`.
 * 
 * @global
 * @param {String} name
 * @returns {HTMLCollection|NodeList} A collection of elements with the specified name attribute.
 */
window.$name = function(name) {
	return document.getElementsByName(name);
}

/**
 * Returns a list of the elements within the document with the specified tag name.&lt;br />
 * Alias of `document.getElementsByTagName()`.
 * 
 * @global
 * @param {String} tagName
 * @returns {HTMLCollection|NodeList} A collection of elements with the specified tag name.
 */
window.$tag = function(tagName) {
	return document.getElementsByTagName(tagName);
}

//#endregion Global Selectors


//#region ============================ Array =================================

/**
 * The JavaScript Array object.
 * @class Array
 * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array|Array - JavaScript | MDN}
 */

defineProperties(ArrayPrototype, {
	/**
	 * Removes all "empty" items (as defined by {@linkcode Firebolt.isEmpty}) from the array.
	 * 
	 * @function Array.prototype.clean
	 * @param {Boolean} [allowEmptyStrings=false] - Set this to `true` to keep zero-length strings in the array.
	 * @returns {Array} A reference to the array.
	 * @see Firebolt.isEmpty
	 */
	clean: {
		value: function(allowEmptyStrings) {
			for (var i = 0; i &lt; this.length; i++) {
				while (i &lt; this.length &amp;&amp; Firebolt.isEmpty(this[i], allowEmptyStrings)) {
					this.splice(i, 1);
				}
			}
			return this;
		}
	},

	/**
	 * Removes all elements from the array.
	 * 
	 * @function Array.prototype.clear
	 */
	clear: {
		value: function() {
			this.length = 0;
		}
	},

	/**
	 * Returns a duplicate of the array, leaving the original array intact.
	 * 
	 * @function Array.prototype.clone
	 * @returns {Array} A copy of the array.
	 */
	clone: {
		value: function() {
			for (var len = this.length, arr = new Array(len),
					 i = 0; i &lt; len; i++) {
				arr[i] = this[i];
			}
			return arr;
		}
	},

	/**
	 * Determines if the input item is in the array.
	 * 
	 * @function Array.prototype.contains
	 * @returns {Boolean} `true` if the item is in the array; else `false`.
	 */
	contains: {
		value: function(e) {
			return this.indexOf(e) != -1;
		}
	},

	/**
	 * Determines if the arrays are equal by doing a shallow comparison of their elements using strict equality.&lt;br />
	 * NOTE: The order of elements in the arrays DOES matter. The elements must be found in the same order for the arrays to be considered equal.
	 * 
	 * @function Array.prototype.equals
	 * @param {Array|Enumerable} array - Array or other enumerable object that has a `length` property.
	 * @returns {Boolean} `true` if the arrays are equal; else `false`.
	 */
	equals: {
		value: function(array) {
			if (this === array) { //Easy check
				return true;
			}
			if (this.length != array.length) {
				return false;
			}
			for (var i = 0; i &lt; array.length; i++) {
				if (this[i] !== array[i]) {
					return false;
				}
			}
			return true;
		}
	},

	/**
	 * Returns an array containing every item that is in both this array and the input array.
	 * 
	 * @function Array.prototype.intersect
	 * @param {Array|Enumerable} array - Array or other enumerable object that has a `length` property.
	 * @returns {Array} An array that is the intersection of this array and the input array.
	 * @example
	 * [1, 2, 3].intersect([2, 3, 4]);  // returns [2, 3]
	 */
	intersect: {
		value: function(array) {
			for (var intersection = [], i = 0; i &lt; array.length; i++) {
				if (this.contains(array[i]) &amp;&amp; !intersection.contains(array[i])) {
					intersection.push(array[i]);
				}
			}
			return intersection;
		}
	},

	/**
	 * Returns the last item of the array.
	 * 
	 * @function Array.prototype.last
	 * @returns {*} The last item in the array, or undefined if the array is empty.
	 */
	last: {
		value: function() {
			return this[this.length - 1];
		}
	},

	/**
	 * Removes all occurrences of the passed in items from the array if they exist in the array.
	 * 
	 * @function Array.prototype.remove
	 * @param {...*} items - Items to remove from the array.
	 * @returns {Array} A reference to the array (so it's chainable).
	 */
	remove: {
		value: function() {
			for (var i = 0, rindex; i &lt; arguments.length; i++) {
				while ((rindex = this.indexOf(arguments[i])) >= 0) {
					this.splice(rindex, 1);
				}
			}
			return this;
		}
	},

	/**
	 * Returns an array containing every item that is only in one of this array or the input array.
	 * 
	 * @function Array.prototype.union
	 * @param {Array|Enumerable} array - Array or other enumerable object that has a `length` property.
	 * @returns {Array} An array that is the union of this array and the input array.
	 * @example
	 * [1, 2, 3].union([2, 3, 4]);  // returns [1, 2, 3, 4]
	 */
	union: {
		value: function(array) {
			for (var union = this.unique(), i = 0; i &lt; array.length; i++) {
				if (!union.contains(array[i])) {
					union.push(array[i]);
				}
			}
			return union;
		}
	},

	/**
	 * Returns a duplicate-free clone of the array.
	 * 
	 * @function Array.prototype.unique
	 * @returns {Array} An array of unique items.
	 * @example
	 * [1, 2, 3, 2, 1].unique();  // returns [1, 2, 3]
	 */
	unique: {
		value: function() {
			for (var uniqueClone = [], i = 0; i &lt; this.length; i++) {
				if (!uniqueClone.contains(this[i])) {
					uniqueClone.push(this[i]);
				}
			}
			return uniqueClone;
		}
	},

	/**
	 * Returns a copy of the current array without any elements from the input parameters.
	 * 
	 * @function Array.prototype.without
	 * @param {...*} items - One or more items to leave out of the returned array.
	 * @returns {Array}
	 * @example
	 * [1, 2, 3, 4, 5, 6].without(3, 4, 6); // returns [1, 2, 5]
	 */
	without: {
		value: function() {
			var array = [],
				i = 0,
				j;
			skip:
				for (; i &lt; this.length; i++) {
					for (j = 0; j &lt; arguments.length; j++) {
						if (this[i] === arguments[j]) {
							continue skip;
						}
					}
					array.push(this[i]);
				}
			return array;
		}
	}
});

// #endregion Array


//#region =========================== Document ===============================

/**
 * The HTML DOM Document interface.
 * @namespace Document
 * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/document|Document - Web API Interfaces | MDN}
 */

/**
 * Specify a function to execute when the DOM is fully loaded.&lt;br />
 * Executes the function immediately if the DOM has already finished loading.
 * 
 * @function Document.ready
 * @param {Function} callback - A function to execute once the DOM has been loaded.
 */
document.ready = function(callback) {
	if (document.readyState == 'loading') {
		document.addEventListener("DOMContentLoaded", callback);
	}
	else {
		callback();
	}
};

// #endregion Document


//#region =========================== Element ================================

/**
 * The HTML DOM Element interface.
 * @class Element
 * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/element|Element - Web API Interfaces | MDN}
 */

/**
 * Returns a list of the elements within the element that match the specifed CSS selector.&lt;br />
 * Alias of `Element.querySelectorAll()`.
 * 
 * @function Element.prototype.$
 * @param {String} selector
 * @returns {NodeList} A list of selected elements.
 */
ElementPrototype.$ = function(selector) {
	return this.querySelectorAll(selector);
};

/**
 * Returns the first element within the element that matches the specified CSS selector.&lt;br />
 * Alias of `Element.querySelector()`.
 * 
 * @function Element.prototype.$1
 * @param {String} selector
 * @returns {?Element}
 */
ElementPrototype.$1 = function(selector) {
	return this.querySelector(selector);
};

/**
 * Returns a list of the elements within the element with the specified class name.&lt;br />
 * Alias of `Element.getElementsByClassName()`.
 * 
 * @function Element.prototype.$class
 * @param {String} className
 * @returns {HTMLCollection|NodeList} A collection of elements with the specified class name.
 */
ElementPrototype.$class = function(className) {
	return this.getElementsByClassName(className);
};

/**
 * Returns a list of the elements within the element with the specified tag name.&lt;br />
 * Alias of `Element.getElementsByTagName()`.
 * 
 * @function Element.prototype.$tag
 * @param {String} tagName
 * @returns {HTMLCollection|NodeList} A collection of elements with the specified tag name.
 */
ElementPrototype.$tag = function(tagName) {
	return this.getElementsByTagName(tagName);
};

/**
 * Adds the specified class to the element if the element doesn't already have it.
 * 
 * @function Element.prototype.addClass
 * @param {String} className - The class to be added to the element.
 */
ElementPrototype.addClass = function(className) {
	if (!this.className) {
		this.className = className;
	}
	else if (!_isOldIE) {
		this.classList.add(className);
	}
	else if (!this.hasClass(className)) {
		this.className += ' ' + className;
	}

	return this;
};

/**
 * Gets the value of the element's specified attribute.
 * 
 * @function Element.prototype.attr
 * @param {String|Object} attribute - The name of the attribute who's value you want to get.
 * @returns {String} The value of the attribute being retrieved.
 */
/**
 * Sets the element's specified attribute.
 * 
 * @function Element.prototype.attr
 * @param {String} attribute - The name of the attribute who's value should be set.
 * @param {String} value - The value to set the specified attribute to.
 */
/**
 * Sets the specified attributes of the element.
 * 
 * @function Element.prototype.attr
 * @param {Object.&lt;String, String>} attributes - The name of the attribute who's value should be set or an object of attribute-value pairs to set.
 */
ElementPrototype.attr = function(attr, value) {
	if (typeof value == 'undefined') {
		if (typeof attr == 'string') {
			return this.getAttribute(attr);
		}
		for (var attribute in attr) {
			this.setAttribute(attribute, attr[attribute]);
		}
	}
	else {
		this.setAttribute(attr, value);
	}

	return this;
};

/**
 * Removes all of the element's child nodes.
 * 
 * @function Element.prototype.empty
 * @chainable
 * @example
 * // HTML (before)
 * &lt;div id="mydiv">
 *     &lt;span>Inside Span&lt;/span>
 *     Some Text
 * &lt;/div>
 *
 * // JavaScript
 * $id('mydiv').empty
 *
 * // HTML (after)
 * &lt;div id="mydiv">&lt;/div>
 */
ElementPrototype.empty = function() {
	while (this.childNodes.length) {
		this.removeChild(this.childNodes[0]);
	}
	return this;
};

/**
 * Determines if the element's class list has the specified class name.
 * 
 * @function Element.prototype.hasClass
 * @param {String} className - A string containing a single class name.
 * @returns {Boolean} `true` if the class name is in the element's class list; else `false`.
 */
ElementPrototype.hasClass = function(className) {
	if (!_isOldIE) return this.classList.contains(className);
	return new RegExp('(?:\\s|^)' + className + '(?:\\s|$)').test(this.className);
};

/**
 * Gets the element's inner HTML.
 * 
 * @function Element.prototype.html
 * @returns {String} The element's inner HTML.
 */
/**
 * Set the element's inner HTML.
 * 
 * @function Element.prototype.html
 * @param {String} innerHTML - A string of HTML to set as the content of the element.
 */
ElementPrototype.html = function(innerHTML) {
	if (typeof innerHTML == 'undefined') {
		return this.innerHTML; //Get
	}
	this.innerHTML = innerHTML; //Set

	return this;
};

/**
 * Determines if the element matches the specified CSS selector.
 * 
 * @function Element.prototype.matches
 * @param {String} selector - A CSS selector string.
 * @returns {Boolean} `true` if the element matches the selector; else `false`.
 */
ElementPrototype.matches = ElementPrototype.matches || ElementPrototype.webkitMatchesSelector || ElementPrototype.mozMatchesSelector || ElementPrototype.msMatchesSelector;

/**
 * Gets or set the element's inner HTML.
 * 
 * @function Element.prototype.prepend
 * @param {...(String|Node|Array.&lt;Node>)} content - One or more DOM elements, arrays of elements, or HTML strings to insert at the beginning of this element.
 */
ElementPrototype.prepend = function() {
	for (var items = arguments, i = 0; i &lt; items.length; i++) {
		
	}

	return this;
};

/**
 * Gets the value of the element's specified property.
 * 
 * @function Element.prototype.prop
 * @param {String} property - The name of the property who's value you want to get.
 * @returns {?} The value of the property being retrieved.
 */
/**
 * Sets the specified property of the element.
 * 
 * @function Element.prototype.prop
 * @param {String} property - The name of the property to be set.
 * @param {*} value - The value to set the property to.
 */
/**
 * Sets the specified properties of the element.
 * 
 * @function Element.prototype.prop
 * @param {Object.&lt;String, *>} properties - An object of property-value pairs to set.
 */
ElementPrototype.prop = function(prop, value) {
	if (typeof value == 'undefined') {
		if (typeof prop == 'string') {
			return this[prop]; //Get
		}
		for (var property in prop) {
			this[property] = prop[property]; //Set multiple
		}
	}
	else {
		this[prop] = value; //Set single
	}

	return this;
};

/**
 * Removes the specified attribute from the element.
 * 
 * @function Element.prototype.removeAttr
 * @param {String} attribute - The name of the attribute to remove.
 */
ElementPrototype.removeAttr = function(attribute) {
	this.removeAttribute(attribute);

	return this;
};

/**
 * Removes the input class from the element if the element currently has it.
 * 
 * @function Element.prototype.removeClass
 * @param {String} className - The class to be removed from the element.
 */
ElementPrototype.removeClass = function(className) {
	if (_isChrome || _isOldIE) {
		var changed = false,
			classes = this.className.split(rgxSpaceChars),
			newClassName = '',
			i = 0;
		for (; i &lt; classes.length; i++) {
			if (!classes[i]) continue;
			if (classes[i] != className) {
				if (newClassName) newClassName += ' ';
				newClassName += classes[i];
			}
			else {
				changed = true;
			}
		}
		if (changed) {
			this.className = newClassName;
		}
	}
	else {
		this.classList.remove(className);
	}

	return this;
};

/**
 * Removes the specified property from the element.
 * 
 * @function Element.prototype.removeProp
 * @param {String} property - The name of the property to remove.
 */
ElementPrototype.removeProp = function(property) {
	this[property] = null;

	return this;
};

/**
 * Toggles the specified class for the element.
 * 
 * @function Element.prototype.toggleClass
 * @param {String} className - The class to be toggled.
 */
ElementPrototype.toggleClass = function(className) {
	if (this.className) {
		if (this.hasClass(className)) {
			var classes = this.className.split(rgxSpaceChars),
				newClassName = '',
				i = 0;
			for (; i &lt; classes.length; i++) {
				if (classes[i] &amp;&amp; classes[i] != className) {
					if (newClassName) newClassName += ' ';
					newClassName += classes[i];
				}
			}
			this.className = newClassName;
		}
		else {
			this.className += ' ' + className;
		}
	}
	else {
		this.className = className;
	}

	return this;
};

// #endregion Element


//#region =========================== Firebolt ===============================

/**
 * The Firebolt namespace.
 * @namespace Firebolt
 */

/*
 * Specifically for the Firebolt selector.
 * Determines if the input is actually an HTML string instead of a CSS selector.
 * 
 * Rationale:
 * 
 * The string can only be considered HTML if it contains the tag open character: '&lt;'.
 * Normally, this character should never appear in a CSS selector, however it is possible
 * for an element to have an attribute with a value that contains the '&lt;' character.
 * Here's an example:
 * 
 * &lt;div data-notcool="&lt;tag>">&lt;/div>
 * 
 * Hence, this element should be able to be selected with the following CSS selector:
 * 
 * [data-notcool="&lt;tag>"]
 * 
 * So for the string to truly be HTML, not only must it contain the '&lt;' character, but
 * the first instance of that character must also be found in the string before any
 * instance of the '[' character.
 * 
 * The reason the '[' character is not searched for if the index of the '&lt;' character is
 * less that 4 is because the smallest possible CSS selector that contains '&lt;' is this:
 * 
 * [d="&lt;"]
 * 
 * This also means that if '&lt;' is found in the string, we only need to start searching for
 * a '[' beginning at the index 4 less than the index the fist '&lt;' was found at. 
 * 
 * @param {String} str
 * @returns 1 if the string is deemed to be an HTML string; else 0.
 */
function isHtml(str) {
	var idxTag = str.indexOf('&lt;');
	if (idxTag >= 0 &amp;&amp; (idxTag &lt; 4 || str.lastIndexOf('[', idxTag - 4) == -1)) {
		return 1;
	}
	return 0;
}

/**
 * Returns a list of the elements either found in the DOM that match the passed in CSS selector or created by passing an HTML string.&lt;br />
 * When passed a CSS selector string, acts as an alias of `document.querySelectorAll()`.&lt;br />
 * Also represents the Firebolt namespace object and can be referenced by the synonyms FB and $ (on pages without jQuery).&lt;br />
 * &lt;br />
 * NOTE: When a selector is passed into this function that is of the form "#elid" (for selecting a single element by its id),
 * only a single element is returned instead of a NodeList (or `null` if there are no elements with the id). 
 * 
 * @function
 * @param {String} str - A CSS selector string or an HTML string.
 * @returns {NodeList} A non-live list of selected elements or newly created elements.
 * @memberOf Firebolt
 * @example
 * $('button.btn-success') // Returns all button elements with the class "btn-success"
 * $('str &lt;p>content&lt;/p>') // Creates a set of nodes and returns it as a NodeList (in this case ["str ", &lt;p>content&lt;/p>])
 * $('1&lt;br>2&lt;br>3 >');     // Returns ["1", &lt;br>â, "2", &lt;br>â, "3 >"]
 * $.create('div')         // Calls Firebolt's `create()` method to create a new div element 
 */
function Firebolt(str) {
	if (str[0] == '.' &amp;&amp; rgxClassOrId.test(str)) {
		return document.getElementsByClassName(str.slice(1));
	}
	if (str[0] == '#' &amp;&amp; rgxClassOrId.test(str)) {
		return document.getElementById(str.slice(1));
	}
	if (rgxTag.test(str)) {
		return document.getElementsByTagName(str);
	}
	if (isHtml(str)) {
		return Firebolt.create('div').html(str).childNodes;
	}
	//else
	return document.querySelectorAll(str);
}

/**
 * Creates a new element with the specified tag name and attributes (optional).&lt;br />
 * Partially an alias of `document.createElement()`.
 * 
 * @param {String} tagName
 * @param {Object} [attributes] - The JSON-formatted attributes that the element should have once constructed.
 * @returns {Element}
 * @memberOf Firebolt
 */
Firebolt.create = function(tagName, attributes) {
	var el = document.createElement(tagName);
	if (attributes) {
		el.attr(attributes);
	}
	return el;
};

/**
 * Calls the passed in function after the specified amount of time in milliseconds.
 * 
 * @param {Function} callback - A function to be called after the specified amount of time.
 * @param {Number} ms - An integer between 0 and +â : [ 0, +â).
 * @returns {Object} An object that can be used to cancel the callback before it is executed by calling `object.clear()`.
 * @memberOf Firebolt
 */
Firebolt.delay = function(callback, ms) {
	return new function() {
		var clearRef = setTimeout(callback, ms);
		this.clear = function() {
			clearTimeout(clearRef);
		};
	};
};

/**
 * HTML decodes the passed in string and returns the result.
 * 
 * @param {String} string - An HTML string to be decoded.
 * @returns {String}
 * @memberOf Firebolt
 */
Firebolt.HTMLDecode = function(str) {
	return $('&lt;div/>').html(str).text();
}

/**
 * HTML encodes the passed in string and returns the result.
 * 
 * @param {String} string - A string to be encoded.
 * @returns {String}
 * @memberOf Firebolt
 */
Firebolt.HTMLEncode = function(str) {
	return $('&lt;div/>').text(str).html();
}

/**
 * Determines if the passed in value is considered empty. The value is considered empty if it is one of the following:
 * &lt;ul>
 * &lt;li>`null`&lt;/li>
 * &lt;li>`undefined`&lt;/li>
 * &lt;li>a zero-length array&lt;/li>
 * &lt;li>an empty object (as defined by {@linkcode Firebolt.isEmptyObject})&lt;/li>
 * &lt;li>a zero-length string (unless the `allowEmptyString` parameter is set to a truthy value)&lt;/li>
 * &lt;/ul>
 * 
 * @param {*} value - The value to be tested.
 * @param {Boolean} [allowEmptyString=false] - Set this to true to regard zero-length strings as not empty.
 * @returns {Boolean}
 * @memberOf Firebolt
 */
Firebolt.isEmpty = function(value, allowEmptyString) {
	return value == null || typeof value == 'string' &amp;&amp; !allowEmptyString &amp;&amp; !value || typeof value == 'object' &amp;&amp; Firebolt.isEmptyObject(value);
};

/**
 * Determines if an object is empty (contains no enumerable properties).
 * 
 * @param {Object} object - The object to be tested.
 * @returns {Boolean}
 * @memberOf Firebolt
 */
Firebolt.isEmptyObject = function(object) {
	for (var item in object) {
		return false;
	}
	return true;
};

/**
 * Determines if the user is on a touchscreen device.
 * 
 * @returns {Boolean} `true` if the user is on a touchscreen device; else `false`.
 * @memberOf Firebolt
 */
Firebolt.isTouchDevice = function() {
	return 'ontouchstart' in window || 'onmsgesturechange' in window;
};

/**
 * Same as {@link Document.ready|document.ready()}
 * 
 * @function
 * @see Document.ready
 * @memberOf Firebolt
 */
Firebolt.ready = document.ready;

/**
 * Converts an array of nodes to a non-live NodeList containing only DOM Elements.
 * 
 * @param {Array.&lt;Node>|NodeList} elements - An array containing nodes that are in the current documentElement (this will not work if the nodes are not in the current documentElement).
 * @returns {NodeList} The original array of elements converted to a NodeList containing only nodes of the original list that are of node type 1 (Element).
 * @memberOf Firebolt
 */
Firebolt.toDeadNodeList = function(elements) {
	NodeListPrototype.attr.call(elements, NodeListIdentifier, '');
	return this('[' + NodeListIdentifier + ']').removeAttr(NodeListIdentifier);
};

//#endregion Firebolt


//#region =========================== Function ===============================

/**
 * The JavaScript Function interface.
 * @class Function
 * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function|Function - JavaScript | MDN}
 */

/**
 * Delays a function call for the specified number of milliseconds.
 * 
 * @function Function.prototype.delay
 * @param {Number} ms - The number of milliseconds to wait before calling the functions.
 * @returns {Object} An object that can be used to cancel the callback before it is executed by calling `object.clear()`.
 */
Function[prototype].delay = function(ms) {
	var that = this;
	return new function() {
		var clearRef = setTimeout(that, ms);
		this.clear = function() {
			clearTimeout(clearRef);
		};
	};
};

// #endregion Function


//#region ========================== HTMLElement =============================

/**
 * The HTML DOM HTMLElement interface.
 * @class HTMLElement
 * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement|HTMLElement - Web API Interfaces | MDN}
 */

/**
 * Gets the element's computed style object.
 * 
 * @function HTMLElement.prototype.css
 * @returns {Object.&lt;String, String>} The element's computed style object.
 */
/**
 * Gets the value of the element's specified style property.
 * 
 * @function HTMLElement.prototype.css
 * @param {String} propertyName - The name of the style property who's value you want to retrieve.
 * @returns {String} The value of the specifed style property.
 */
/**
 * Sets the element's specified style property.
 * 
 * @function HTMLElement.prototype.css
 * @param {String} propertyName - The name of the style property to set.
 * @param {String|Number} value - A value to set for the specified property.
 */
/**
 * Sets CSS style properties.
 * 
 * @function HTMLElement.prototype.css
 * @param {Object.&lt;String, String|Number>} properties - An object of CSS property-values.
 */
/**
 * Explicitly sets the element's inline CSS style, removing or replacing any current inline style properties.
 * 
 * @function HTMLElement.prototype.css
 * @param {String} cssText - A CSS style string.
 */
HTMLElementPrototype.css = function(prop, value) {
	if (typeof prop == 'string') {
		if (typeof value == 'undefined') {
			if (!/:/.test(prop)) {
				//Get the specified property
				return getComputedStyle(this)[prop];
			}
			//Else set the element's css text
			this.style.cssText = prop;
		}
		else {
			//Set the specified property
			this.style[prop] = value;
		}
	}
	else if (typeof prop == 'object') {
		//Set all specifed properties
		for (var propName in prop) {
			this.style[propName] = prop[propName];
		}
	}
	else {
		return getComputedStyle(this);
	}

	return this;
};

/**
 * Hides the element by setting its display style to 'none'.
 * 
 * @function HTMLElement.prototype.hide
 */
HTMLElementPrototype.hide = function() {
	//if (getComputedStyle(this).display !== "none") {
		this.style.display = 'none';
	//}

	return this;
};

/**
 * Gets the element's current coordinates relative to the document.
 * 
 * @function HTMLElement.prototype.offset
 * @returns {{top: Number, left: Number}} An object containing the coordinates detailing the element's distance from the top and left of the screen.
 * @example
 * // HTML
 * &lt;body style="margin: 0">
 *   &lt;div id='a' style="position: absolute; margin: 10px; left: 10px">&lt;/div>
 * &lt;/body>
 * 
 * // JavaScript
 * var offset = $id('a').offset();
 * alert( offset.top + ', ' + offset.left );  // "10, 20"
 */
HTMLElementPrototype.offset = function() {
	var el = this,
		offset = {
			top: 0,
			left: 0
		};
	do {
		offset.top += el.offsetTop + el.clientTop;
		offset.left += el.offsetLeft + el.clientLeft;
	} while (el = el.offsetParent)
	return offset;
};

/**
 * Shows an element by giving it a certain display style. If no parameter is passed in,
 * Firebolt determines the element's default display style and sets it to that (NOTE:
 * the element's default display style may be 'none' and hence the element would not be shown).
 * 
 * @function HTMLElement.prototype.show
 * @param {Number|String} [style] - The style of display the element should be shown with. Possibilities are:
 * &lt;ul>
 * &lt;li>0 => 'block'&lt;/li>
 * &lt;li>1 => 'inline-block'&lt;/li>
 * &lt;li>2 => 'inline'&lt;/li>
 * &lt;/ul>
 * For other display types, only the string parameter will be accepted.&lt;br />
 * If the arguement is left blank, the element's default style will be used.
 */
HTMLElementPrototype.show = function(style) {
	if (typeof style == 'number') {
		switch (style) {
			case 0:
				style = 'block';
				break;
			case 1:
				style = 'inline-block';
				break;
			case 2:
				style = 'inline';
		}
	}
	if (typeof style !== 'string') {
		//Create a temporary element of the same type as this element to figure out what the default display value should be
		var temp = Firebolt.create(this.tagName, {
			style: 'width:0;height:0;border:0;margin:0;padding:0'
		}).insertAfter(document.body.lastChild);
		style = temp.css('display');
		temp.remove();
	}
	this.style.display = style;

	return this;
};

// #endregion HTMLElement


//#region ============================= Node =================================

/**
 * The HTML DOM Node interface.
 * @class Node
 * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Node|Node - Web API Interfaces | MDN}
 */

/**
 * Inserts the specified node directly after this node.
 * 
 * @function Node.prototype.after
 * @param {Node|String|?} node - The node to insert. If the input parameter is not a Node, it is converted to a TextNode before being inserted.
 * @returns {Node} The node being inserted.
 */
NodePrototype.after = function(node) {
	if (!node.nodeType) {
		node = document.createTextNode(node);
	}
	this.parentNode.insertBefore(node, this.nextSibling);

	return node;
};

/**
 * Inserts the specified node directly before this node.
 * 
 * @function Node.prototype.before
 * @param {Node|String|?} node - The node to insert. If the input parameter is not a Node, it is converted to a TextNode before being inserted.
 * @returns {Node} The inserted node.
 */
NodePrototype.before = function(node) {
	if (!node.nodeType) {
		node = document.createTextNode(node);
	}
	this.parentNode.insertBefore(node, this);

	return node;
};


/**
 * Inserts this node directly after the specified node.
 * 
 * @function Node.prototype.insertAfter
 * @param {Node} node - The node after which this node should be inserted.
 * @returns {Node} This node.
 */
NodePrototype.insertAfter = function(node) {
	node.parentNode.insertBefore(this, node.nextSibling);

	return this;
};

/**
 * Removes this node from the DOM.
 * 
 * @function Node.prototype.remove
 */
NodePrototype.remove = function() {
	this.parentNode.removeChild(this);
};

/**
 * Gets this node's text content (specifically uses the native JavaScript property `Node.textContent`).
 * 
 * @function Node.prototype.text
 * @returns {String} The node's text content.
 */
/**
 * Sets this node's text content (specifically uses the native JavaScript property `Node.textContent`).
 * 
 * @function Node.prototype.text
 * @param {String|*} text - The text or content that will be converted to a string to be set as the node's text content.
 */
NodePrototype.text = function(text) {
	if (typeof text == 'undefined') {
		return this.textContent;
	}
	//else
	this.textContent = text;

	return this;
};

// #endregion Node


//#region =========================== NodeList ===============================

/**
 * The HTML DOM NodeList interface.&lt;br />
 * It should be noted that elements in a NodeList are always unique in the order they are found in the document.
 * Furthermore, NodeLists cannot have their elements removed or have elements added them. To do these types of
 * things, you must first convert the NodeList to an Array (see {@linkcode NodeList#toArray|NodeList.toArray()});
 * @class NodeList
 * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/NodeList|NodeList - Web API Interfaces | MDN}
 */

/* Give NodeLists the same prototype functions as Arrays */
Object.getOwnPropertyNames(ArrayPrototype).forEach(function(methodName) {
	if (!NodeListPrototype[methodName]) {
		switch (methodName) {
			case 'contains':
			case 'equals':
			case 'forEach':
			case 'indexOf':
			case 'lastIndexOf':
			case 'last':
			case 'reduce':
			case 'reduceRight':
			case 'some':
				NodeListPrototype[methodName] = ArrayPrototype[methodName];
				break;
			//For these methods, the result must be converted back to a NodeList
			case 'clone':
			case 'concat':
			case 'intersect':
			case 'slice':
			case 'union':
			case 'without':
				NodeListPrototype[methodName] = function() {
					return Firebolt.toDeadNodeList(ArrayPrototype[methodName].apply(this, arguments));
				}	
		}
	}
});

/** 
 * Calls the function with the passed in name on each element in an enumerable.
 * 
 * @private
 * @param {String} funcName - The name of a function.
 * @returns {Array|NodeList|HTMLCollection} A reference to the enumerable
 * @this An enumerable such as an Array, NodeList, or HTMLCollection.
 */
function callOnEachElement(funcName) {
	return function() {
		for (var i = 0, len = this.length; i &lt; len; i++) {
			if (this[i].nodeType == 1) this[i][funcName].apply(this[i], arguments);
		}
		return this;
	};
}

/** 
 * Returns a function that calls the function with the passed in name on each element in an enumerable
 * unless the number of arguments passed to the function is less than the specified number or the first
 * argument passed in is an object, in which case the result of calling the function of the first element
 * is returned.
 * 
 * @private
 * @param {String} funcName - The name of a function.
 * @param {Number} numArgs - The number of arguments that will be given to the function for setting. Anything less is for getting.
 * @returns {Array|NodeList|HTMLCollection} A reference to the enumerable.
 * @this An enumerable such as an Array, NodeList, or HTMLCollection.
 */
function getFirstSetEachElement(funcName, numArgs) {
	return function() {
		var items = this,
			len = items.length,
			i = 0;
		if (arguments.length &lt; numArgs &amp;&amp; typeof arguments[0] != 'object') {
			for (; i &lt; len; i++) {
				if (items[i].nodeType == 1) {
					return items[i][funcName](arguments[0]); //Allowed to assume at most one argument needed
				}
			}
			return null;
		}
		//else
		for (; i &lt; len; i++) {
			if (items[i].nodeType == 1) {
				items[i][funcName].apply(items[i], arguments);
			}
		}
		return items;
	};
}

/**
 * Adds the element, list of elements, or queried elements to a copy of the existing list and returns the result.
 * 
 * @function NodeList.prototype.add
 * @param {Element|NodeList|HTMLCollection|String} e
 * @returns {NodeList} The result of adding the new item(s) to the current list.
 */
NodeListPrototype.add = function(e) {
	if (typeof e == 'string') {
		e = $(e);
	}
	else if (!e.length) {
		e = [e];
	}
	return this.concat(e);
};

/**
 * Adds the input class name to all elements in the collection.
 * 
 * @function NodeList.prototype.addClass
 * @param {String} className - The class to be added to each element in the collection.
 */
NodeListPrototype.addClass = callOnEachElement('addClass');

/**
 * Gets the value of the specified attribute of the first element in the list.
 * 
 * @function NodeList.prototype.attr
 * @param {String} attribute - The name of the attribute who's value you want to get.
 * @returns {String} The value of the attribute being retrieved.
 */
/**
 * Sets the specified attribute for each element in the list.
 * 
 * @function NodeList.prototype.attr
 * @param {String} attribute - The name of the attribute who's value should be set.
 * @param {String} value - The value to set the specified attribute to.
 */
/**
 * Sets attributes for each element in the list.
 * 
 * @function NodeList.prototype.attr
 * @param {Object.&lt;String, String>} attributes - The name of the attribute who's value should be set or an object of attribute-value pairs to set.
 */
NodeListPrototype.attr = getFirstSetEachElement('attr', 2);

/**
 * Clicks each element in the list.
 * 
 * @function NodeList.prototype.click
 */
NodeListPrototype.click = callOnEachElement('click');

/**
 * Gets the computed style object of the first element in the list.
 * 
 * @function NodeList.prototype.css
 * @returns {Object.&lt;String, String>} The element's computed style object.
 */
/**
 * Gets the value of the specified style property of the first element in the list.
 * 
 * @function NodeList.prototype.css
 * @param {String} propertyName - The name of the style property who's value you want to retrieve.
 * @returns {String} The value of the specifed style property.
 */
/**
 * Sets the specified style property for each element in the list.
 * 
 * @function NodeList.prototype.css
 * @param {String} propertyName - The name of the style property to set.
 * @param {String|Number} value - A value to set for the specified property.
 */
/**
 * Sets CSS style properties for each element in the list.
 * 
 * @function NodeList.prototype.css
 * @param {Object.&lt;String, String|Number>} properties - An object of CSS property-values.
 */
/**
 * Explicitly sets each elements' inline CSS style, removing or replacing any current inline style properties.
 * 
 * @function NodeList.prototype.css
 * @param {String} cssText - A CSS style string.
 */
NodeListPrototype.css = getFirstSetEachElement('css', 2);

/**
 * Removes all child nodes from each element in the list.
 * 
 * @function NodeList.prototype.empty
 */
NodeListPrototype.empty = callOnEachElement('empty');

/**
 * Reduce the set of matched elements to those that match the selector or pass the function's test.
 * 
 * @function NodeList.prototype.filter
 * @param {String|Function} selector - CSS selector string or function that returns a truthy value if the element should not be filtered out.
 * @returns {NodeList} 
 */
NodeListPrototype.filter = function(selector) {
	var filtration = [],
		i = 0;
	if (typeof selector == 'string') {
		for (; i &lt; this.length; i++) {
			if (this[i].nodeType == 1 &amp;&amp; this[i].matches(selector)) {
				filtration.push(this[i]);
			}
		}
	}
	else {
		var nodes = Firebolt.toDeadNodeList(this);
		for (; i &lt; nodes.length; i++) {
			if (selector(i)) {
				filtration.push(nodes[i]);
			}
		}
	}

	return Firebolt.toDeadNodeList(filtration);
};

/**
 * Hides each element in the collection.
 * 
 * @function NodeList.prototype.hide
 * @see HTMLElement#hide
 */
NodeListPrototype.hide = callOnEachElement('hide');

/**
 * Gets the inner HTML of the first element in the list.
 * 
 * @function NodeList.prototype.html
 * @returns {String} The element's inner HTML.
 */
/**
 * Set the element's inner HTML.
 * 
 * @function Element.prototype.html
 * @param {String} innerHTML - A string of HTML to set as the content of the element.
 */
NodeListPrototype.html = getFirstSetEachElement('html', 1);

/**
 * Converts a NodeList to a non-live NodeList.
 * 
 * @function NodeList.prototype.kill
 * @returns {NodeList} A non-live NodeList containing only nodes of the original list that are of node type 1 ({@linkcode http://dom.spec.whatwg.org/#node|ELEMENT_NODE}).
 */
NodeListPrototype.kill = function() {
	this.attr(NodeListIdentifier, '');
	return Firebolt('[' + NodeListIdentifier + ']').removeAttr(NodeListIdentifier);
};

/**
 * Gets the value of the specified property of the first element in the list.
 * 
 * @function NodeList.prototype.prop
 * @param {String} property - The name of the property who's value you want to get.
 * @returns {?} The value of the property being retrieved.
 */
/**
 * Sets the specified property for each element in the list.
 * 
 * @function NodeList.prototype.prop
 * @param {String} property - The name of the property to be set.
 * @param {*} value - The value to set the property to.
 */
/**
 * Sets the specified properties of each element in the list.
 * 
 * @function NodeList.prototype.prop
 * @param {Object.&lt;String, *>} properties - An object of property-value pairs to set.
 */
NodeListPrototype.prop = getFirstSetEachElement('prop', 2);

/**
 * Removes all nodes in the collection from the DOM tree.
 * 
 * @function NodeList.prototype.remove
 */
NodeListPrototype.remove = function() {
	var origLen = this.length,
		i = 1;
	if (origLen == 0) return;
	this[0].remove();
	if (this.length == origLen) { //Non-live
		for (; i &lt; origLen; i++) {
			this[i].remove();
		}
	}
	else { //Live
		for (; i &lt; origLen; i++) {
			this[0].remove();
		}
	}
};

/**
 * Removes the specified attribute from each element in the list.
 * 
 * @function NodeList.prototype.removeAttr
 * @param {String} attribute - The name of the attribute to be removed.
 */
NodeListPrototype.removeAttr = callOnEachElement('removeAttr');

/**
 * Removes the input class name from all elements in the list.
 * 
 * &lt;h5>&lt;strong>Warning:&lt;/strong>&lt;/h5>
 * 
 * Due to the fact that NodeLists returned by the {@linkcode $class|$class()} function
 * are live, the following code will produce undesirable behaviour:
 * 
 * &lt;pre class="prettyprint">$class('someClass').removeClass('someClass');&lt;/pre>
 * 
 * To avoid problems caused by this, use a non-live NodeList such as in the following alternative methods:
 * 
 * &lt;pre class="prettyprint">
 * $('.someClass').removeClass('someClass');
 * $class('someClass').kill().removeClass('someClass');
 * &lt;/pre>
 * 
 * @function NodeList.prototype.removeClass
 * @param {String} className - The class to be removed from each element in the collection.
 */
NodeListPrototype.removeClass = callOnEachElement('removeClass');

/**
 * Removes the specified property from each element in the list.
 * 
 * @function NodeList.prototype.removeProp
 * @param {String} property - The name of the property to remove.
 */
NodeListPrototype.removeProp = callOnEachElement('removeProp');

/**
 * Shows each element in the set. For specifics, see {@link HTMLElement#show}.
 * 
 * @function NodeList.prototype.show
 * @param {Number|String} [style] - The style of display the element should be shown with.
 * @see HTMLElement.show
 */
NodeListPrototype.show = callOnEachElement('show');

/**
 * Gets the text content of the first node in the list.
 * 
 * @function NodeList.prototype.text
 * @returns {String} The node's text content.
 */
/**
 * Sets text content of each node in the list.
 * 
 * @function NodeList.prototype.text
 * @param {String|*} text - The text or content that will be converted to a string to be set as each nodes' text content.
 */
NodeListPrototype.text = function(text) {
	var i = 0;
	if (typeof text == 'undefined') {
		for (text = ''; i &lt; this.length; i++) {
			text += this[i].textContent;
		}
		return text;
	}
	//else
	for (; i &lt; this.length; i++) {
		this[i].textContent = text;
	}

	return this;
};

/**
 * Converts the current NodeList to an Array.
 * 
 * @function NodeList.prototype.toArray
 * @returns {Array.&lt;Node>} An Array containing the same elements as the NodeList;
 */
NodeListPrototype.toArray = function() {
	return ArrayPrototype.clone.call(this);
};

/**
 * Toggles the input class name for all elements in the list.
 * 
 * @function NodeList.prototype.toggleClass
 * @param {String} className - The class to be toggled for each element in the collection.
 */
NodeListPrototype.toggleClass = callOnEachElement('toggleClass');

// #endregion NodeList


//#region ========================= HTMLCollection ===========================

/**
 * The DOM HTMLCollection interface.&lt;br />
 * Has all the same functions as {@link NodeList}.
 * @class HTMLCollection
 * @see NodeList
 * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLCollection|HTMLCollection - Web API Interfaces | MDN}
 */

/* Give HTMLCollections the same prototype functions as NodeLists (if they don't already have them) */
Object.getOwnPropertyNames(NodeListPrototype).forEach(function(methodName) {
	if (methodName != 'length' &amp;&amp; !HTMLCollection[prototype][methodName]) {
		HTMLCollection[prototype][methodName] = NodeListPrototype[methodName];
	}
});

//#endregion HTMLCollection


//#region ============================ Number ================================

/**
 * The JavaScript Number object.
 * @class Number
 * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number|Number - JavaScript | MDN}
 */

/**
 * Returns a string representation of the number padded with leading 0s so that the string's length is at least equal to length.
 * Takes an optional radix argument which specifies the base to use for conversion.
 * 
 * @function Number.prototype.toPaddedString
 * @param {Number} length - The minimum length for the resulting string.
 * @param {Number} [radix=10] - Defines which base to use for representing the numeric value. Must be an integer between 2 and 36.
 * @example
 * (255).toPaddedString(4);     // "0255"
 * (255).toPaddedString(4, 16); // "00ff"
 * (25589).toPaddedString(4);   // "25589"
 * (3).toPaddedString(5, 2);    // "00011"
 * (-3).toPaddedString(5, 2);   // "-0011"
 */
Number[prototype].toPaddedString = function(length, radix) {
	var sNumber = this.toString(radix);
	if (length > sNumber.length) {
		sNumber = '0'.repeat(length - sNumber.length) + sNumber;
	}
	return this &lt; 0 ? '-' + sNumber.replace('-', '') : sNumber;
}; 

//#endregion Number


//#region ============================ String ================================

/**
 * The JavaScript String object.
 * @class String
 * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String|String - JavaScript | MDN}
 */

if (!StringPrototype.contains) {
	/**
	 * Determines whether the passed in string is in the current string.
	 *
	 * @function String.prototype.contains
	 * @param {String} searchString - The string to be searched for.
	 * @param {Number} [position=0] - The position in this string at which to begin the search; defaults to 0.
	 * @returns {Boolean} `true` if this string contains the search string; else `false`.
	 * @example
	 * var str = "Winter is coming.";
	 * alert( str.contains(" is ") );    // true
	 * alert( str.contains("summer") );  // false
	 */
	defineProperty(StringPrototype, 'contains', {
		value: function(searchString, position) {
			return this.indexOf(searchString, position) >= 0;
		}
	});
}

if (!StringPrototype.endsWith) {
	/**
	 * Determines whether a string ends with the characters of another string.
	 *
	 * @function String.prototype.endsWith
	 * @param {String} searchString - The characters to be searched for at the end of this string.
	 * @returns {Boolean} `true` if this string ends with the search string; else `false`.
	 * @example
	 * var str = "Who am I, Gamling?";
	 * alert( str.endsWith("Gamling?") );  // true
	 * alert( str.endsWith("am I") );      // false
	 */
	defineProperty(StringPrototype, 'endsWith', {
		value: function(searchString) {
			return this.indexOf(searchString, this.length - searchString.length) >= 0;
		}
	});
}

if (!StringPrototype.repeat) {
	/**
	 * Copies the current string a given number of times and returns the new string.
	 *
	 * @function String.prototype.repeat
	 * @param {Number} count - An integer between 0 and +â : [ 0, +â).
	 * @returns {String}
	 * @example
	 * "abc".repeat(0)  // ""
	 * "abc".repeat(1)  // "abc"
	 * "abc".repeat(2)  // "abcabc"
	 * "0".repeat(5)    // "00000" 
	 */
	defineProperty(StringPrototype, 'repeat', {
		value: function(count) {
			var str = this,
				i = 1;
			for (; i &lt; count; i++) {
				str += this;
			}
			return str;
		}
	});
}

if (!StringPrototype.startsWith) {
	/**
	 * Determines whether a string starts with the characters of another string.
	 *
	 * @function String.prototype.startsWith
	 * @param {String} searchString - The characters to be searched for at the start of this string.
	 * @returns {Boolean} `true` if this string starts with the search string; else `false`.
	 * @example
	 * var str = "Who am I, Gamling?";
	 * alert( str.endsWith("Who") );   // true
	 * alert( str.endsWith("am I") );  // false
	 */
	defineProperty(StringPrototype, 'startsWith', {
		value: function(searchString) {
			return this.lastIndexOf(searchString, 0) == 0;
		}
	});
}

/**
 * Returns the string split into an array of substrings (tokens) that were separated by white-space.
 *
 * @function String.prototype.tokenize
 * @returns {String[]} An array of tokens.
 * @example
 * var str = "The boy who lived.";
 * str.tokenize();  // returns ["The", "boy", "who", "lived."]
 */
defineProperty(StringPrototype, 'tokenize', {
	value: function() {
		return this.match(rgxNonWhitespace) || [];
	}
});

//#endregion String


/*
 * Private, constant variables for improving function performance and compatibility with IE 9
 */
var _isChrome = !!window.chrome &amp;&amp; !(window.opera || navigator.userAgent.indexOf(' OPR/') >= 0),
	_isOldIE = Firebolt.create('div').html('&lt;!--[if lte IE9]>&lt;i>&lt;/i>&lt;![endif]-->').$tag('i').length > 0;

})(window, document);


//#region ============================ Timer =================================

/**
 * @class
 * @example
 * // HTML
 * &lt;div id="display">0&lt;/div>
 * 
 * // JavaScript
 * var seconds = 0,
 *     counter = new Timer(function() {
 *         seconds++;
 *         $id('display').text(seconds);
 *     }, 1000).start();
 */
function Timer(callback, interval, onstart, onstop) {
	// Private
	var _clearRef,
		_isRunning = false,
		_this = this;

	// Public
	_this.callback = callback;

	_this.interval = interval;

	_this.onstart = onstart;

	_this.onstop = onstop;

	_this.isRunning = function() {
		return _isRunning;
	};

	_this.start = function() {
		if (!_isRunning) {
			_clearRef = setInterval(function() {
				_this.callback();
			}, interval);
			_isRunning = true;
			if (_this.onstart) {
				_this.onstart();
			}
		}
		return _this;
	};

	_this.stop = function() {
		if (_isRunning) {
			clearInterval(_clearRef);
			_isRunning = false;
			if (_this.onstop) {
				_this.onstop();
			}
		}
		return _this;
	};
}

//#endregion Timer
</pre> </article> </section> </div> <div class="clearfix"></div> <footer> <span class="copyright"> Copyright Â© 2014 Nathan Woltman </span> <br/> <span class="jsdoc-message"> Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a> on Sun Apr 06 2014 20:53:51 GMT-0400 (EDT) using the <a href="https://github.com/terryweiss/docstrap">DocStrap template</a>. </span> </footer> </div> <br clear="both"> </div> </div> <script src="scripts/sunlight.js"></script> <script src="scripts/sunlight.javascript.js"></script> <script src="scripts/sunlight-plugin.doclinks.js"></script> <script src="scripts/sunlight-plugin.linenumbers.js"></script> <script src="scripts/sunlight-plugin.menu.js"></script> <script src="scripts/jquery.min.js"></script> <script src="scripts/jquery.scrollTo.js"></script> <script src="scripts/jquery.localScroll.js"></script> <script src="scripts/bootstrap-dropdown.js"></script> <script src="scripts/toc.js"></script> <script>  Sunlight.highlightAll({lineNumbers: true,  showMenu: true, enableDoclinks: true}); </script> <script>
		$( function () {
			$( "#toc" ).toc( {
			    anchorName  : function(i, heading, prefix) {
					return $(heading).attr("id") || ( prefix + i );
				},
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : 60
			} );
			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );
			
			$( "#toc>ul a" ).click(function() {
				var $this = $(this),
					href = $this.attr('href'),
					el = $('.name'+href);
				if (el.hasClass('member-collapsed')) {
					el.click();
				}
			});
		} );
	</script> <script>
		$( function () {
			var defs = $( "dt h4.name" ),
				numDefs = defs.length;
			defs.each(function() {
				var $this = $(this);
				var icon = $("<i/>").addClass("pull-right");
				var dt = $this.parents("dt");
				var children = dt.next("dd");

				$this.append(icon).css( {cursor : "pointer"} );
				$this.addClass("member");
				
				if (numDefs > 3 && !(location.hash && this.id === location.hash.slice(1))) {
					icon.addClass("icon-plus-sign");
					$this.addClass("member-collapsed");
					children.hide();
				}
				else {
					icon.addClass("icon-minus-sign");
					$this.addClass("member-open");
				}
			} ).on('click', function () {
				var $this = $(this),
					children = $this.parents("dt").next("dd");
					$this.children('i').toggleClass("icon-plus-sign icon-minus-sign");
				if ($this.hasClass('member-collapsed')) {
					children.slideDown();
				}
				else {
					children.slideUp();
				}
				$this.toggleClass("member-open member-collapsed");
			} );
			
			if (location.hash) {
				$('[href="' + location.hash + '"]').click();
			}
			if ($('member-collapsed').length) {
				$('.search-query').after('<button class="btn btn-link" onclick="$(\'member-collapsed\').click()">Expand All</button>');
			}
			
			//Fix all <a> tags with the '$' in the href
			$('#toc a[href^="#$"]').each(function(i, el) {
				el.href = el.href.slice(el.href.indexOf('#')).replace('$', '_');
			});
			$('.dropdown a[href*="#$"]').each(function(i, el) {
				el.href = el.href.slice(el.href.lastIndexOf('/') + 1).replace('$', '_');
			});
			//Fix all tags with the '$' in the href
			$('[id^="$"]').each(function(i, el) {
				el.id = el.id.replace('$', '_');
			});
			
			//For all <a> tags that are not on this domain, set the target to '_blank'
			$('a[href^="http"]').each(function() {
				this.target = '_blank';
			});
		} );
	</script> </body> </html>